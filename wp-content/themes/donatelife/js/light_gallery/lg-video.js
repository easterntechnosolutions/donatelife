!function(e,o){"function"==typeof define&&define.amd?define([],function(){return o()}):"object"==typeof exports?module.exports=o():o()}(0,function(){!function(e,o,i,a){"use strict";var l={videoMaxWidth:"855px",youtubePlayerParams:!1,vimeoPlayerParams:!1,dailymotionPlayerParams:!1,vkPlayerParams:!1,videojs:!1,videojsOptions:{}},s=function(o){return this.core=e(o).data("lightGallery"),this.$el=e(o),this.core.s=e.extend({},l,this.core.s),this.videoLoaded=!1,this.init(),this};s.prototype.init=function(){var o=this;o.core.$el.on("hasVideo.lg.tm",function(e,i,a,l){if(o.core.$slide.eq(i).find(".lg-video").append(o.loadVideo(a,"lg-object",!0,i,l)),l)if(o.core.s.videojs)try{videojs(o.core.$slide.eq(i).find(".lg-html5").get(0),o.core.s.videojsOptions,function(){o.videoLoaded||this.play()})}catch(e){console.error("Make sure you have included videojs")}else o.core.$slide.eq(i).find(".lg-html5").get(0).play()}),o.core.$el.on("onAferAppendSlide.lg.tm",function(e,i){o.core.$slide.eq(i).find(".lg-video-cont").css("max-width",o.core.s.videoMaxWidth),o.videoLoaded=!0});var i=function(e){if(e.find(".lg-object").hasClass("lg-has-poster")&&e.find(".lg-object").is(":visible"))if(e.hasClass("lg-has-video")){var i=e.find(".lg-youtube").get(0),a=e.find(".lg-vimeo").get(0),l=e.find(".lg-dailymotion").get(0),s=e.find(".lg-html5").get(0);if(i)i.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*");else if(a)try{$f(a).api("play")}catch(e){console.error("Make sure you have included froogaloop2 js")}else if(l)l.contentWindow.postMessage("play","*");else if(s)if(o.core.s.videojs)try{videojs(s).play()}catch(e){console.error("Make sure you have included videojs")}else s.play();e.addClass("lg-video-playing")}else{e.addClass("lg-video-playing lg-has-video");var r=function(i,a){if(e.find(".lg-video").append(o.loadVideo(i,"",!1,o.core.index,a)),a)if(o.core.s.videojs)try{videojs(o.core.$slide.eq(o.core.index).find(".lg-html5").get(0),o.core.s.videojsOptions,function(){this.play()})}catch(e){console.error("Make sure you have included videojs")}else o.core.$slide.eq(o.core.index).find(".lg-html5").get(0).play()};o.core.s.dynamic?r(o.core.s.dynamicEl[o.core.index].src,o.core.s.dynamicEl[o.core.index].html):r(o.core.$items.eq(o.core.index).attr("href")||o.core.$items.eq(o.core.index).attr("data-src"),o.core.$items.eq(o.core.index).attr("data-html"));var t=e.find(".lg-object");e.find(".lg-video").append(t),e.find(".lg-video-object").hasClass("lg-html5")||(e.removeClass("lg-complete"),e.find(".lg-video-object").on("load.lg error.lg",function(){e.addClass("lg-complete")}))}};o.core.doCss()&&o.core.$items.length>1&&(o.core.s.enableSwipe&&o.core.isTouch||o.core.s.enableDrag&&!o.core.isTouch)?o.core.$el.on("onSlideClick.lg.tm",function(){var e=o.core.$slide.eq(o.core.index);i(e)}):o.core.$slide.on("click.lg",function(){i(e(this))}),o.core.$el.on("onBeforeSlide.lg.tm",function(i,a,l){var s,r=o.core.$slide.eq(a),t=r.find(".lg-youtube").get(0),d=r.find(".lg-vimeo").get(0),c=r.find(".lg-dailymotion").get(0),n=r.find(".lg-vk").get(0),m=r.find(".lg-html5").get(0);if(t)t.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*");else if(d)try{$f(d).api("pause")}catch(e){console.error("Make sure you have included froogaloop2 js")}else if(c)c.contentWindow.postMessage("pause","*");else if(m)if(o.core.s.videojs)try{videojs(m).pause()}catch(e){console.error("Make sure you have included videojs")}else m.pause();n&&e(n).attr("src",e(n).attr("src").replace("&autoplay","&noplay")),s=o.core.s.dynamic?o.core.s.dynamicEl[l].src:o.core.$items.eq(l).attr("href")||o.core.$items.eq(l).attr("data-src");var f=o.core.isVideo(s,l)||{};(f.youtube||f.vimeo||f.dailymotion||f.vk)&&o.core.$outer.addClass("lg-hide-download")}),o.core.$el.on("onAfterSlide.lg.tm",function(e,i){o.core.$slide.eq(i).removeClass("lg-video-playing")})},s.prototype.loadVideo=function(o,i,a,l,s){var r="",t=1,d="",c=this.core.isVideo(o,l)||{};if(a&&(t=this.videoLoaded?0:1),c.youtube)d="?wmode=opaque&autoplay="+t+"&enablejsapi=1",this.core.s.youtubePlayerParams&&(d=d+"&"+e.param(this.core.s.youtubePlayerParams)),r='<iframe class="lg-video-object lg-youtube '+i+'" width="560" height="315" src="//www.youtube.com/embed/'+c.youtube[1]+d+'" frameborder="0" allowfullscreen></iframe>';else if(c.vimeo)d="?autoplay="+t+"&api=1",this.core.s.vimeoPlayerParams&&(d=d+"&"+e.param(this.core.s.vimeoPlayerParams)),r='<iframe class="lg-video-object lg-vimeo '+i+'" width="560" height="315"  src="//player.vimeo.com/video/'+c.vimeo[1]+d+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>';else if(c.dailymotion)d="?wmode=opaque&autoplay="+t+"&api=postMessage",this.core.s.dailymotionPlayerParams&&(d=d+"&"+e.param(this.core.s.dailymotionPlayerParams)),r='<iframe class="lg-video-object lg-dailymotion '+i+'" width="560" height="315" src="//www.dailymotion.com/embed/video/'+c.dailymotion[1]+d+'" frameborder="0" allowfullscreen></iframe>';else if(c.html5){var n=s.substring(0,1);"."!==n&&"#"!==n||(s=e(s).html()),r=s}else c.vk&&(d="&autoplay="+t,this.core.s.vkPlayerParams&&(d=d+"&"+e.param(this.core.s.vkPlayerParams)),r='<iframe class="lg-video-object lg-vk '+i+'" width="560" height="315" src="http://vk.com/video_ext.php?'+c.vk[1]+d+'" frameborder="0" allowfullscreen></iframe>');return r},s.prototype.destroy=function(){this.videoLoaded=!1},e.fn.lightGallery.modules.video=s}(jQuery,window,document)});